---
title: "surveydown: An Open-Source, Markdown-Based Survey Platform"
author: "Pingfan Hu, Bogdan Bunea, John Paul Helveston"
format:
  revealjs: 
    smaller: false
    theme: theme.scss
    css: slides.css
    slide-number: true
    embed-resources: true
    auto-stretch: false
    preview-links: auto
    logo: figs/logo.png
    footer: "<a href='https://surveydown.org'>surveydown.org</a>"
    link-external-newwindow: true
    link-external-icon: false
    center-title-slide: false
    title-slide-attributes: 
      data-background-image: figs/surveydown.png
      data-background-size: 25%
      data-background-opacity: "1"
      class: custom-title-slide

execute: 
  warning: false
  echo: false
---

```{r}
#| label: setup
#| include: false
library(tidyverse)
library(kableExtra)
library(googlesheets4)
```


## [What do we need from a survey platform?]{style="text-align: center"} {.center}

## Survey features

::: {.grid-container}
::: {.centered-orange .container}
Free to Use
:::

::: {.centered-orange .container}
Open Source
:::

::: {.centered-orange .container}
Learning Curve
:::

::: {.centered-orange .container}
Reproducible
:::

::: {.centered-orange .container}
Generalizable
:::
:::

## Existing Survey Platforms

```{r}
#| label: comparison-table
gs4_deauth()
comparisons <- read_sheet("1zlaNbhzOQAJnVlT8t_WmDv-uAnHwvDCb66vwYtVU5M8")
comparisons %>% 
  kbl(align = c("l", "c", "c", "c", "c", "c")) %>% 
  kable_styling(font_size = 20, bootstrap_options = "basic", 
                html_font = "inherit",
                full_width = FALSE,
                position = "center") %>%
  row_spec(0:nrow(comparisons), extra_css = "vertical-align: middle !important; height: 2em;") %>%
  row_spec(nrow(comparisons), color = "#FF5733", font_size = 28) %>%
  column_spec(1, bold = TRUE)
```

## Introducing `surveydown`

![](figs/technologies.svg){.r-stretch fig-align="center" width="90%"}

## A surveydown Project {.smaller}

::: columns
::: {.column width="50%"}
### `survey.qmd`

Load package:
```{r echo=TRUE, eval=FALSE}
library(surveydown)
```
Write markdown:
```
# Welcome Page
Hi! This is a **surveydown** survey!
```

Define question:
```{r echo=TRUE, eval=FALSE}
sd_question(
  type   = "mc",
  id     = "like_apple",
  label  = "Do you like apple?",
  option = c(
    "Yes" = "yes",
    "No"  = "no"
  )
)
```
Next page & End survey:
```{r echo=TRUE, eval=FALSE}
sd_next()
sd_close()
```

:::

::: {.column width="50%"}
### `app.R`
Database setup:
```{r echo=TRUE, eval=FALSE}
# Supabase credentials
sd_db_config()

# Connect to database
db <- sd_db_connect()
```

Server setup:
```{r echo=TRUE, eval=FALSE}
server <- function(input, output, session) {

  # Skip logic
  sd_skip_if(...)

  # Conditional display
  sd_show_if(...)

  # Server settings
  sd_server(...)
}
```

Launch survey:
```{r echo=TRUE, eval=FALSE}
shiny::shinyApp(ui = sd_ui(), server = server)
```
:::
:::

## Demo - Built-in Question Types

[![](figs/demo_1.png){width="80%" fig-align="center" style="border: 2px solid #5654A2;"}](https://surveydown.shinyapps.io/types/)

## Demo - `leaflet` Map

[![](figs/demo_2.png){width="80%" fig-align="center" style="border: 2px solid #5654A2;"}](https://surveydown2.shinyapps.io/leaflet/)

## [Proceed to [surveydown.org](https://surveydown.org) for more details.]{style="text-align: center; display: block;"} {.center}